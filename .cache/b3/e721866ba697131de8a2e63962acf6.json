{"id":"src/index.js","dependencies":[{"name":"C:\\Users\\chidinma.igboobiakor\\Documents\\PaymentRequest\\package.json","includedInParent":true,"mtime":1647551570708},{"name":"graphql-request","loc":{"line":1,"column":34,"index":34},"parent":"C:\\Users\\chidinma.igboobiakor\\Documents\\PaymentRequest\\src\\index.js","resolved":"C:\\Users\\chidinma.igboobiakor\\Documents\\PaymentRequest\\node_modules\\graphql-request\\dist\\index.js"},{"name":"regenerator-runtime/runtime","loc":{"line":2,"column":7,"index":62},"parent":"C:\\Users\\chidinma.igboobiakor\\Documents\\PaymentRequest\\src\\index.js","resolved":"C:\\Users\\chidinma.igboobiakor\\Documents\\PaymentRequest\\node_modules\\regenerator-runtime\\runtime.js"}],"generated":{"js":"\"use strict\";\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _require = require(\"graphql-request\"),\n    GraphQLClient = _require.GraphQLClient;\n\nconsole.log('Hello World');\n/*\r\n//Relpace Client assertion\r\nconst CLIENT_ASSERTION =\r\n    \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IkUzMDZBOTg4NDIwNjZBQkU5QzQ1QjQ0MjIyNTU0NjlFNTMwNEE2RTQifQ.eyJpYXQiOjE2NDc2MjAwMzQsIm5iZiI6MTY0NzYyMDAzNCwiZXhwIjoxNjQ3NjIwMzM0LCJhdWQiOiJodHRwczovL3NlY3VyZS5zdGl0Y2gubW9uZXkvY29ubmVjdC90b2tlbiIsImlzcyI6InRlc3QtMzdkMDlmMTYtZDVmNS00MjI5LThiMTgtMGU5NjE2ZDM3YmM3Iiwic3ViIjoidGVzdC0zN2QwOWYxNi1kNWY1LTQyMjktOGIxOC0wZTk2MTZkMzdiYzciLCJqdGkiOiI1Y2U3NWUyZDQ3MGRkZTQwMmI3MjA1NmNlMWExM2IzYyJ9.jRQMKtzQ1FHxZZ4-1alvq3PNcbNPi_A-TaffSSg02KSXAbn9RCICQyRrOvyo--fEjc8JK25pewuJUQA2jhmLIqaAnaDaGqOTWZQ38-7OI7QmCnIDrJT8jRoKTreA97Yy7XjJZKXpWT5hdD2B_bDiBCmFUV-wbQLCUrxMEktWp4o8-1ZXF1w1NWdx4vnrlAnSqUoI44b5F1dTawxb0utfW5YY00u_A0xwHidre0w7jN8gtphT6Dj2gCJhrTCfyLGx2JeyS0eYo-Vxg6W-Im-d7BHXBKVKOPG77r7hShbxaE530KtYHcTXuzRZ8KtdJDscSiyhcH2h16-oLF8bdjWlgL0pkrqTUJcr7K1hfhvRvS9UKUjWak4QhkJdD01MqtgRtjWd2LXAf26hnqFPfQ8n_WW34ZAmgGJgeoyQ8_q_l1yldjTrAeb0P9NmfFLHGd3r_o6rAyHYoY4CQSHsolwCjV-scCE580IyE9qALFkupn3AVuKdkJ9Y8_hBC2-rqPxVPdXD9kuqh3vvM9fgSA3DZzMuBfXhucS6L1EVb9BYP09KW8UYYnqU-PJUmRPIl5HsuOpB8MnozfFuofARlBFPtBTzK2aMfOwkfr4fkOzX36Vi_BpazG_36KDsjbmES5FOd92iqZEoQyXjldhyojEKkq7NDEibdBT22bjrMNtjX3Y\";\r\nconst CLIENT_ID = \"test-37d09f16-d5f5-4229-8b18-0e9616d37bc7\";\r\n\r\nasync function retrieveTokenUsingClientAssertion(\r\n    clientId,\r\n    clientAssertion,\r\n    scopes\r\n) {\r\n    const body = {\r\n        grant_type: \"client_credentials\",\r\n        client_id: clientId,\r\n        scope: scopes,\r\n        audience: \"https://secure.stitch.money/connect/token\",\r\n        client_assertion_type:\r\n            \"urn:ietf:params:oauth:client-assertion-type:jwt-bearer\",\r\n        client_assertion: clientAssertion\r\n    };\r\n    const bodyString = Object.entries(body)\r\n        .map(([k, v]) => `${k}=${encodeURIComponent(v)}`)\r\n        .join(\"&\");\r\n    const response = await fetch(\"https://secure.stitch.money/connect/token\", {\r\n        method: \"post\",\r\n        headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n        body: bodyString\r\n    });\r\n    const responseBody = await response.json();\r\n    console.log(\"Tokens: \", responseBody);\r\n    return responseBody.access_token;\r\n}\r\n\r\n//Whenever you need a new token, uncomment section below, it will generate a new token, then check console on the browser to get the token\r\n\r\n\r\nconst token = retrieveTokenUsingClientAssertion(\r\n    CLIENT_ID,\r\n    CLIENT_ASSERTION,\r\n    \"client_paymentrequest\"\r\n);\r\n*/\n//Replace with newly generated token\n//const token = \"kU2NhCiPQ--TB_0A9tDqweZg-Wf6APjspvtVLjUaN1g\";\n\nvar paybutton = document.getElementById('pay-button');\npaybutton.addEventListener(\"click\", function () {\n  console.log(token);\n  var token = \"0fanmeJjUSO1Ub06sTJb0to4mU-pVT1HlsQ0lGsIwoA\";\n  var graphQLClient = new GraphQLClient(\"https://api.stitch.money/graphql\", {\n    headers: {\n      authorization: \"Bearer \".concat(token)\n    }\n  });\n  var createPaymentRequestMutation = \"\\n    mutation CreatePaymentRequest(\\n        $amount: MoneyInput!,\\n        $payerReference: String!,\\n        $beneficiaryReference: String!,\\n        $externalReference: String,\\n        $beneficiaryName: String!,\\n        $beneficiaryBankId: BankBeneficiaryBankId!,\\n        $beneficiaryAccountNumber: String!) {\\n      clientPaymentInitiationRequestCreate(input: {\\n          amount: $amount,\\n          payerReference: $payerReference,\\n          beneficiaryReference: $beneficiaryReference,\\n          externalReference: $externalReference,\\n          beneficiary: {\\n              bankAccount: {\\n                  name: $beneficiaryName,\\n                  bankId: $beneficiaryBankId,\\n                  accountNumber: $beneficiaryAccountNumber\\n              }\\n          }\\n        }) {\\n        paymentInitiationRequest {\\n          id\\n          url\\n        }\\n      }\\n    }\";\n  var urlResponse = '';\n  graphQLClient.request(createPaymentRequestMutation, {\n    amount: {\n      quantity: 1,\n      currency: \"ZAR\"\n    },\n    payerReference: \"Joe-Fizz-01\",\n    beneficiaryReference: \"KombuchaFizz\",\n    externalReference: \"example-e32e5478-325b-4869-a53e-2021727d2afe\",\n    beneficiaryName: \"FizzBuzz Co.\",\n    beneficiaryBankId: \"fnb\",\n    beneficiaryAccountNumber: \"123456789\"\n  }).then(function (data) {\n    console.log(\"THE DATA: \", data.clientPaymentInitiationRequestCreate.paymentInitiationRequest);\n    urlResponse = data.clientPaymentInitiationRequestCreate.paymentInitiationRequest;\n    console.log(urlResponse);\n    var url = \"\".concat(urlResponse.url, \"?redirect_uri=http%3A%2F%2Flocalhost%3A3000\");\n    window.location.href = url;\n  });\n});"},"sourceMaps":{"js":{"mappings":[{"generated":{"line":3,"column":0},"source":"src/index.js","original":{"line":2,"column":0}},{"generated":{"line":5,"column":0},"source":"src/index.js","original":{"line":1,"column":0}},{"name":"require","generated":{"line":5,"column":15},"source":"src/index.js","original":{"line":1,"column":26}},{"generated":{"line":5,"column":22},"source":"src/index.js","original":{"line":1,"column":33}},{"generated":{"line":5,"column":23},"source":"src/index.js","original":{"line":1,"column":34}},{"generated":{"line":5,"column":40},"source":"src/index.js","original":{"line":1,"column":33}},{"generated":{"line":5,"column":41},"source":"src/index.js","original":{"line":1,"column":0}},{"generated":{"line":6,"column":0},"source":"src/index.js","original":{"line":1,"column":0}},{"name":"GraphQLClient","generated":{"line":6,"column":4},"source":"src/index.js","original":{"line":1,"column":8}},{"generated":{"line":6,"column":17},"source":"src/index.js","original":{"line":1,"column":0}},{"name":"GraphQLClient","generated":{"line":6,"column":29},"source":"src/index.js","original":{"line":1,"column":8}},{"generated":{"line":6,"column":42},"source":"src/index.js","original":{"line":1,"column":0}},{"name":"console","generated":{"line":8,"column":0},"source":"src/index.js","original":{"line":3,"column":0}},{"generated":{"line":8,"column":7},"source":"src/index.js","original":{"line":3,"column":7}},{"name":"log","generated":{"line":8,"column":8},"source":"src/index.js","original":{"line":3,"column":8}},{"generated":{"line":8,"column":11},"source":"src/index.js","original":{"line":3,"column":0}},{"generated":{"line":8,"column":12},"source":"src/index.js","original":{"line":3,"column":12}},{"generated":{"line":8,"column":25},"source":"src/index.js","original":{"line":3,"column":0}},{"generated":{"line":9,"column":0},"source":"src/index.js","original":{"line":4,"column":0}},{"generated":{"line":10,"column":0},"source":"src/index.js","original":{"line":5,"column":0}},{"generated":{"line":11,"column":0},"source":"src/index.js","original":{"line":6,"column":0}},{"generated":{"line":12,"column":0},"source":"src/index.js","original":{"line":7,"column":0}},{"generated":{"line":13,"column":0},"source":"src/index.js","original":{"line":8,"column":0}},{"generated":{"line":14,"column":0},"source":"src/index.js","original":{"line":9,"column":0}},{"generated":{"line":15,"column":0},"source":"src/index.js","original":{"line":10,"column":0}},{"generated":{"line":16,"column":0},"source":"src/index.js","original":{"line":11,"column":0}},{"generated":{"line":17,"column":0},"source":"src/index.js","original":{"line":12,"column":0}},{"generated":{"line":18,"column":0},"source":"src/index.js","original":{"line":13,"column":0}},{"generated":{"line":19,"column":0},"source":"src/index.js","original":{"line":14,"column":0}},{"generated":{"line":20,"column":0},"source":"src/index.js","original":{"line":15,"column":0}},{"generated":{"line":21,"column":0},"source":"src/index.js","original":{"line":16,"column":0}},{"generated":{"line":22,"column":0},"source":"src/index.js","original":{"line":17,"column":0}},{"generated":{"line":23,"column":0},"source":"src/index.js","original":{"line":18,"column":0}},{"generated":{"line":24,"column":0},"source":"src/index.js","original":{"line":19,"column":0}},{"generated":{"line":25,"column":0},"source":"src/index.js","original":{"line":20,"column":0}},{"generated":{"line":26,"column":0},"source":"src/index.js","original":{"line":21,"column":0}},{"generated":{"line":27,"column":0},"source":"src/index.js","original":{"line":22,"column":0}},{"generated":{"line":28,"column":0},"source":"src/index.js","original":{"line":23,"column":0}},{"generated":{"line":29,"column":0},"source":"src/index.js","original":{"line":24,"column":0}},{"generated":{"line":30,"column":0},"source":"src/index.js","original":{"line":25,"column":0}},{"generated":{"line":31,"column":0},"source":"src/index.js","original":{"line":26,"column":0}},{"generated":{"line":32,"column":0},"source":"src/index.js","original":{"line":27,"column":0}},{"generated":{"line":33,"column":0},"source":"src/index.js","original":{"line":28,"column":0}},{"generated":{"line":34,"column":0},"source":"src/index.js","original":{"line":29,"column":0}},{"generated":{"line":35,"column":0},"source":"src/index.js","original":{"line":30,"column":0}},{"generated":{"line":36,"column":0},"source":"src/index.js","original":{"line":31,"column":0}},{"generated":{"line":37,"column":0},"source":"src/index.js","original":{"line":32,"column":0}},{"generated":{"line":38,"column":0},"source":"src/index.js","original":{"line":33,"column":0}},{"generated":{"line":39,"column":0},"source":"src/index.js","original":{"line":34,"column":0}},{"generated":{"line":40,"column":0},"source":"src/index.js","original":{"line":35,"column":0}},{"generated":{"line":41,"column":0},"source":"src/index.js","original":{"line":36,"column":0}},{"generated":{"line":42,"column":0},"source":"src/index.js","original":{"line":37,"column":0}},{"generated":{"line":43,"column":0},"source":"src/index.js","original":{"line":38,"column":0}},{"generated":{"line":44,"column":0},"source":"src/index.js","original":{"line":39,"column":0}},{"generated":{"line":45,"column":0},"source":"src/index.js","original":{"line":40,"column":0}},{"generated":{"line":46,"column":0},"source":"src/index.js","original":{"line":41,"column":0}},{"generated":{"line":47,"column":0},"source":"src/index.js","original":{"line":42,"column":0}},{"generated":{"line":48,"column":0},"source":"src/index.js","original":{"line":43,"column":0}},{"generated":{"line":49,"column":0},"source":"src/index.js","original":{"line":44,"column":0}},{"generated":{"line":50,"column":0},"source":"src/index.js","original":{"line":45,"column":0}},{"generated":{"line":51,"column":0},"source":"src/index.js","original":{"line":47,"column":0}},{"generated":{"line":52,"column":0},"source":"src/index.js","original":{"line":48,"column":0}},{"generated":{"line":54,"column":0},"source":"src/index.js","original":{"line":51,"column":0}},{"name":"paybutton","generated":{"line":54,"column":4},"source":"src/index.js","original":{"line":51,"column":6}},{"generated":{"line":54,"column":13},"source":"src/index.js","original":{"line":51,"column":15}},{"name":"document","generated":{"line":54,"column":16},"source":"src/index.js","original":{"line":51,"column":18}},{"generated":{"line":54,"column":24},"source":"src/index.js","original":{"line":51,"column":26}},{"name":"getElementById","generated":{"line":54,"column":25},"source":"src/index.js","original":{"line":51,"column":27}},{"generated":{"line":54,"column":39},"source":"src/index.js","original":{"line":51,"column":18}},{"generated":{"line":54,"column":40},"source":"src/index.js","original":{"line":51,"column":42}},{"generated":{"line":54,"column":52},"source":"src/index.js","original":{"line":51,"column":18}},{"generated":{"line":54,"column":53},"source":"src/index.js","original":{"line":51,"column":0}},{"name":"paybutton","generated":{"line":55,"column":0},"source":"src/index.js","original":{"line":52,"column":0}},{"generated":{"line":55,"column":9},"source":"src/index.js","original":{"line":52,"column":9}},{"name":"addEventListener","generated":{"line":55,"column":10},"source":"src/index.js","original":{"line":52,"column":10}},{"generated":{"line":55,"column":26},"source":"src/index.js","original":{"line":52,"column":0}},{"generated":{"line":55,"column":27},"source":"src/index.js","original":{"line":52,"column":27}},{"generated":{"line":55,"column":34},"source":"src/index.js","original":{"line":52,"column":0}},{"generated":{"line":55,"column":36},"source":"src/index.js","original":{"line":52,"column":36}},{"generated":{"line":55,"column":48},"source":"src/index.js","original":{"line":52,"column":48}},{"name":"console","generated":{"line":56,"column":0},"source":"src/index.js","original":{"line":53,"column":4}},{"name":"console","generated":{"line":56,"column":2},"source":"src/index.js","original":{"line":53,"column":4}},{"generated":{"line":56,"column":9},"source":"src/index.js","original":{"line":53,"column":11}},{"name":"log","generated":{"line":56,"column":10},"source":"src/index.js","original":{"line":53,"column":12}},{"generated":{"line":56,"column":13},"source":"src/index.js","original":{"line":53,"column":4}},{"name":"token","generated":{"line":56,"column":14},"source":"src/index.js","original":{"line":53,"column":16}},{"generated":{"line":56,"column":19},"source":"src/index.js","original":{"line":53,"column":4}},{"generated":{"line":57,"column":0},"source":"src/index.js","original":{"line":54,"column":4}},{"name":"token","generated":{"line":57,"column":6},"source":"src/index.js","original":{"line":54,"column":10}},{"generated":{"line":57,"column":11},"source":"src/index.js","original":{"line":54,"column":15}},{"generated":{"line":57,"column":14},"source":"src/index.js","original":{"line":54,"column":18}},{"generated":{"line":57,"column":59},"source":"src/index.js","original":{"line":54,"column":4}},{"generated":{"line":58,"column":0},"source":"src/index.js","original":{"line":55,"column":4}},{"name":"graphQLClient","generated":{"line":58,"column":6},"source":"src/index.js","original":{"line":55,"column":10}},{"generated":{"line":58,"column":19},"source":"src/index.js","original":{"line":55,"column":23}},{"generated":{"line":58,"column":22},"source":"src/index.js","original":{"line":55,"column":26}},{"name":"GraphQLClient","generated":{"line":58,"column":26},"source":"src/index.js","original":{"line":55,"column":30}},{"generated":{"line":58,"column":39},"source":"src/index.js","original":{"line":55,"column":26}},{"generated":{"line":58,"column":40},"source":"src/index.js","original":{"line":55,"column":44}},{"generated":{"line":58,"column":74},"source":"src/index.js","original":{"line":55,"column":26}},{"generated":{"line":58,"column":76},"source":"src/index.js","original":{"line":55,"column":80}},{"name":"headers","generated":{"line":59,"column":0},"source":"src/index.js","original":{"line":56,"column":8}},{"name":"headers","generated":{"line":59,"column":4},"source":"src/index.js","original":{"line":56,"column":8}},{"generated":{"line":59,"column":11},"source":"src/index.js","original":{"line":56,"column":15}},{"generated":{"line":59,"column":13},"source":"src/index.js","original":{"line":56,"column":17}},{"name":"authorization","generated":{"line":60,"column":0},"source":"src/index.js","original":{"line":56,"column":19}},{"name":"authorization","generated":{"line":60,"column":6},"source":"src/index.js","original":{"line":56,"column":19}},{"generated":{"line":60,"column":19},"source":"src/index.js","original":{"line":56,"column":32}},{"name":"token","generated":{"line":60,"column":38},"source":"src/index.js","original":{"line":56,"column":44}},{"generated":{"line":60,"column":43},"source":"src/index.js","original":{"line":56,"column":32}},{"generated":{"line":61,"column":0},"source":"src/index.js","original":{"line":56,"column":17}},{"generated":{"line":62,"column":0},"source":"src/index.js","original":{"line":55,"column":80}},{"generated":{"line":62,"column":3},"source":"src/index.js","original":{"line":55,"column":26}},{"generated":{"line":62,"column":4},"source":"src/index.js","original":{"line":55,"column":4}},{"generated":{"line":63,"column":0},"source":"src/index.js","original":{"line":58,"column":4}},{"name":"createPaymentRequestMutation","generated":{"line":63,"column":6},"source":"src/index.js","original":{"line":58,"column":10}},{"generated":{"line":63,"column":34},"source":"src/index.js","original":{"line":58,"column":38}},{"generated":{"line":63,"column":928},"source":"src/index.js","original":{"line":58,"column":4}},{"generated":{"line":64,"column":0},"source":"src/index.js","original":{"line":87,"column":4}},{"name":"urlResponse","generated":{"line":64,"column":6},"source":"src/index.js","original":{"line":87,"column":8}},{"generated":{"line":64,"column":17},"source":"src/index.js","original":{"line":87,"column":19}},{"generated":{"line":64,"column":20},"source":"src/index.js","original":{"line":87,"column":22}},{"generated":{"line":64,"column":22},"source":"src/index.js","original":{"line":87,"column":4}},{"name":"graphQLClient","generated":{"line":65,"column":0},"source":"src/index.js","original":{"line":89,"column":8}},{"name":"graphQLClient","generated":{"line":65,"column":2},"source":"src/index.js","original":{"line":89,"column":8}},{"generated":{"line":65,"column":15},"source":"src/index.js","original":{"line":89,"column":21}},{"name":"request","generated":{"line":65,"column":16},"source":"src/index.js","original":{"line":90,"column":13}},{"generated":{"line":65,"column":23},"source":"src/index.js","original":{"line":89,"column":8}},{"name":"createPaymentRequestMutation","generated":{"line":65,"column":24},"source":"src/index.js","original":{"line":90,"column":21}},{"generated":{"line":65,"column":52},"source":"src/index.js","original":{"line":89,"column":8}},{"generated":{"line":65,"column":54},"source":"src/index.js","original":{"line":90,"column":51}},{"name":"amount","generated":{"line":66,"column":0},"source":"src/index.js","original":{"line":91,"column":16}},{"name":"amount","generated":{"line":66,"column":4},"source":"src/index.js","original":{"line":91,"column":16}},{"generated":{"line":66,"column":10},"source":"src/index.js","original":{"line":91,"column":22}},{"generated":{"line":66,"column":12},"source":"src/index.js","original":{"line":91,"column":24}},{"name":"quantity","generated":{"line":67,"column":0},"source":"src/index.js","original":{"line":92,"column":20}},{"name":"quantity","generated":{"line":67,"column":6},"source":"src/index.js","original":{"line":92,"column":20}},{"generated":{"line":67,"column":14},"source":"src/index.js","original":{"line":92,"column":28}},{"generated":{"line":67,"column":16},"source":"src/index.js","original":{"line":92,"column":30}},{"generated":{"line":67,"column":17},"source":"src/index.js","original":{"line":91,"column":24}},{"name":"currency","generated":{"line":68,"column":0},"source":"src/index.js","original":{"line":93,"column":20}},{"name":"currency","generated":{"line":68,"column":6},"source":"src/index.js","original":{"line":93,"column":20}},{"generated":{"line":68,"column":14},"source":"src/index.js","original":{"line":93,"column":28}},{"generated":{"line":68,"column":16},"source":"src/index.js","original":{"line":93,"column":30}},{"generated":{"line":69,"column":0},"source":"src/index.js","original":{"line":91,"column":24}},{"generated":{"line":69,"column":5},"source":"src/index.js","original":{"line":90,"column":51}},{"name":"payerReference","generated":{"line":70,"column":0},"source":"src/index.js","original":{"line":95,"column":16}},{"name":"payerReference","generated":{"line":70,"column":4},"source":"src/index.js","original":{"line":95,"column":16}},{"generated":{"line":70,"column":18},"source":"src/index.js","original":{"line":95,"column":30}},{"generated":{"line":70,"column":20},"source":"src/index.js","original":{"line":95,"column":32}},{"generated":{"line":70,"column":33},"source":"src/index.js","original":{"line":90,"column":51}},{"name":"beneficiaryReference","generated":{"line":71,"column":0},"source":"src/index.js","original":{"line":96,"column":16}},{"name":"beneficiaryReference","generated":{"line":71,"column":4},"source":"src/index.js","original":{"line":96,"column":16}},{"generated":{"line":71,"column":24},"source":"src/index.js","original":{"line":96,"column":36}},{"generated":{"line":71,"column":26},"source":"src/index.js","original":{"line":96,"column":38}},{"generated":{"line":71,"column":40},"source":"src/index.js","original":{"line":90,"column":51}},{"name":"externalReference","generated":{"line":72,"column":0},"source":"src/index.js","original":{"line":97,"column":16}},{"name":"externalReference","generated":{"line":72,"column":4},"source":"src/index.js","original":{"line":97,"column":16}},{"generated":{"line":72,"column":21},"source":"src/index.js","original":{"line":97,"column":33}},{"generated":{"line":72,"column":23},"source":"src/index.js","original":{"line":97,"column":35}},{"generated":{"line":72,"column":69},"source":"src/index.js","original":{"line":90,"column":51}},{"name":"beneficiaryName","generated":{"line":73,"column":0},"source":"src/index.js","original":{"line":98,"column":16}},{"name":"beneficiaryName","generated":{"line":73,"column":4},"source":"src/index.js","original":{"line":98,"column":16}},{"generated":{"line":73,"column":19},"source":"src/index.js","original":{"line":98,"column":31}},{"generated":{"line":73,"column":21},"source":"src/index.js","original":{"line":98,"column":33}},{"generated":{"line":73,"column":35},"source":"src/index.js","original":{"line":90,"column":51}},{"name":"beneficiaryBankId","generated":{"line":74,"column":0},"source":"src/index.js","original":{"line":99,"column":16}},{"name":"beneficiaryBankId","generated":{"line":74,"column":4},"source":"src/index.js","original":{"line":99,"column":16}},{"generated":{"line":74,"column":21},"source":"src/index.js","original":{"line":99,"column":33}},{"generated":{"line":74,"column":23},"source":"src/index.js","original":{"line":99,"column":35}},{"generated":{"line":74,"column":28},"source":"src/index.js","original":{"line":90,"column":51}},{"name":"beneficiaryAccountNumber","generated":{"line":75,"column":0},"source":"src/index.js","original":{"line":100,"column":16}},{"name":"beneficiaryAccountNumber","generated":{"line":75,"column":4},"source":"src/index.js","original":{"line":100,"column":16}},{"generated":{"line":75,"column":28},"source":"src/index.js","original":{"line":100,"column":40}},{"generated":{"line":75,"column":30},"source":"src/index.js","original":{"line":100,"column":42}},{"generated":{"line":76,"column":0},"source":"src/index.js","original":{"line":90,"column":51}},{"generated":{"line":76,"column":3},"source":"src/index.js","original":{"line":89,"column":8}},{"name":"then","generated":{"line":76,"column":5},"source":"src/index.js","original":{"line":102,"column":13}},{"generated":{"line":76,"column":9},"source":"src/index.js","original":{"line":89,"column":8}},{"generated":{"line":76,"column":10},"source":"src/index.js","original":{"line":102,"column":18}},{"name":"data","generated":{"line":76,"column":20},"source":"src/index.js","original":{"line":102,"column":19}},{"generated":{"line":76,"column":24},"source":"src/index.js","original":{"line":102,"column":18}},{"generated":{"line":76,"column":26},"source":"src/index.js","original":{"line":102,"column":28}},{"name":"console","generated":{"line":77,"column":0},"source":"src/index.js","original":{"line":103,"column":16}},{"name":"console","generated":{"line":77,"column":4},"source":"src/index.js","original":{"line":103,"column":16}},{"generated":{"line":77,"column":11},"source":"src/index.js","original":{"line":103,"column":23}},{"name":"log","generated":{"line":77,"column":12},"source":"src/index.js","original":{"line":103,"column":24}},{"generated":{"line":77,"column":15},"source":"src/index.js","original":{"line":103,"column":16}},{"generated":{"line":77,"column":16},"source":"src/index.js","original":{"line":103,"column":28}},{"generated":{"line":77,"column":28},"source":"src/index.js","original":{"line":103,"column":16}},{"name":"data","generated":{"line":77,"column":30},"source":"src/index.js","original":{"line":104,"column":20}},{"generated":{"line":77,"column":34},"source":"src/index.js","original":{"line":104,"column":24}},{"name":"clientPaymentInitiationRequestCreate","generated":{"line":77,"column":35},"source":"src/index.js","original":{"line":104,"column":25}},{"generated":{"line":77,"column":71},"source":"src/index.js","original":{"line":104,"column":20}},{"name":"paymentInitiationRequest","generated":{"line":77,"column":72},"source":"src/index.js","original":{"line":104,"column":62}},{"generated":{"line":77,"column":96},"source":"src/index.js","original":{"line":103,"column":16}},{"name":"urlResponse","generated":{"line":78,"column":0},"source":"src/index.js","original":{"line":109,"column":4}},{"name":"urlResponse","generated":{"line":78,"column":4},"source":"src/index.js","original":{"line":109,"column":4}},{"generated":{"line":78,"column":15},"source":"src/index.js","original":{"line":109,"column":15}},{"name":"data","generated":{"line":78,"column":18},"source":"src/index.js","original":{"line":109,"column":18}},{"generated":{"line":78,"column":22},"source":"src/index.js","original":{"line":109,"column":22}},{"name":"clientPaymentInitiationRequestCreate","generated":{"line":78,"column":23},"source":"src/index.js","original":{"line":109,"column":23}},{"generated":{"line":78,"column":59},"source":"src/index.js","original":{"line":109,"column":18}},{"name":"paymentInitiationRequest","generated":{"line":78,"column":60},"source":"src/index.js","original":{"line":109,"column":60}},{"generated":{"line":78,"column":84},"source":"src/index.js","original":{"line":109,"column":4}},{"name":"console","generated":{"line":79,"column":0},"source":"src/index.js","original":{"line":110,"column":4}},{"name":"console","generated":{"line":79,"column":4},"source":"src/index.js","original":{"line":110,"column":4}},{"generated":{"line":79,"column":11},"source":"src/index.js","original":{"line":110,"column":11}},{"name":"log","generated":{"line":79,"column":12},"source":"src/index.js","original":{"line":110,"column":12}},{"generated":{"line":79,"column":15},"source":"src/index.js","original":{"line":110,"column":4}},{"name":"urlResponse","generated":{"line":79,"column":16},"source":"src/index.js","original":{"line":110,"column":16}},{"generated":{"line":79,"column":27},"source":"src/index.js","original":{"line":110,"column":4}},{"generated":{"line":80,"column":0},"source":"src/index.js","original":{"line":111,"column":4}},{"name":"url","generated":{"line":80,"column":8},"source":"src/index.js","original":{"line":111,"column":10}},{"generated":{"line":80,"column":11},"source":"src/index.js","original":{"line":111,"column":13}},{"name":"urlResponse","generated":{"line":80,"column":24},"source":"src/index.js","original":{"line":111,"column":19}},{"generated":{"line":80,"column":35},"source":"src/index.js","original":{"line":111,"column":30}},{"name":"url","generated":{"line":80,"column":36},"source":"src/index.js","original":{"line":111,"column":31}},{"generated":{"line":80,"column":39},"source":"src/index.js","original":{"line":111,"column":13}},{"generated":{"line":80,"column":87},"source":"src/index.js","original":{"line":111,"column":4}},{"name":"window","generated":{"line":81,"column":0},"source":"src/index.js","original":{"line":112,"column":4}},{"name":"window","generated":{"line":81,"column":4},"source":"src/index.js","original":{"line":112,"column":4}},{"generated":{"line":81,"column":10},"source":"src/index.js","original":{"line":112,"column":10}},{"name":"location","generated":{"line":81,"column":11},"source":"src/index.js","original":{"line":112,"column":11}},{"generated":{"line":81,"column":19},"source":"src/index.js","original":{"line":112,"column":4}},{"name":"href","generated":{"line":81,"column":20},"source":"src/index.js","original":{"line":112,"column":20}},{"generated":{"line":81,"column":24},"source":"src/index.js","original":{"line":112,"column":4}},{"name":"url","generated":{"line":81,"column":27},"source":"src/index.js","original":{"line":112,"column":27}},{"generated":{"line":81,"column":30},"source":"src/index.js","original":{"line":112,"column":4}},{"generated":{"line":82,"column":0},"source":"src/index.js","original":{"line":116,"column":1}},{"generated":{"line":82,"column":3},"source":"src/index.js","original":{"line":89,"column":8}},{"generated":{"line":83,"column":0},"source":"src/index.js","original":{"line":118,"column":1}},{"generated":{"line":83,"column":1},"source":"src/index.js","original":{"line":52,"column":0}}],"sources":{"src/index.js":"const { GraphQLClient } = require(\"graphql-request\");\r\nimport 'regenerator-runtime/runtime';\r\nconsole.log('Hello World');\r\n/*\r\n//Relpace Client assertion\r\nconst CLIENT_ASSERTION =\r\n    \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IkUzMDZBOTg4NDIwNjZBQkU5QzQ1QjQ0MjIyNTU0NjlFNTMwNEE2RTQifQ.eyJpYXQiOjE2NDc2MjAwMzQsIm5iZiI6MTY0NzYyMDAzNCwiZXhwIjoxNjQ3NjIwMzM0LCJhdWQiOiJodHRwczovL3NlY3VyZS5zdGl0Y2gubW9uZXkvY29ubmVjdC90b2tlbiIsImlzcyI6InRlc3QtMzdkMDlmMTYtZDVmNS00MjI5LThiMTgtMGU5NjE2ZDM3YmM3Iiwic3ViIjoidGVzdC0zN2QwOWYxNi1kNWY1LTQyMjktOGIxOC0wZTk2MTZkMzdiYzciLCJqdGkiOiI1Y2U3NWUyZDQ3MGRkZTQwMmI3MjA1NmNlMWExM2IzYyJ9.jRQMKtzQ1FHxZZ4-1alvq3PNcbNPi_A-TaffSSg02KSXAbn9RCICQyRrOvyo--fEjc8JK25pewuJUQA2jhmLIqaAnaDaGqOTWZQ38-7OI7QmCnIDrJT8jRoKTreA97Yy7XjJZKXpWT5hdD2B_bDiBCmFUV-wbQLCUrxMEktWp4o8-1ZXF1w1NWdx4vnrlAnSqUoI44b5F1dTawxb0utfW5YY00u_A0xwHidre0w7jN8gtphT6Dj2gCJhrTCfyLGx2JeyS0eYo-Vxg6W-Im-d7BHXBKVKOPG77r7hShbxaE530KtYHcTXuzRZ8KtdJDscSiyhcH2h16-oLF8bdjWlgL0pkrqTUJcr7K1hfhvRvS9UKUjWak4QhkJdD01MqtgRtjWd2LXAf26hnqFPfQ8n_WW34ZAmgGJgeoyQ8_q_l1yldjTrAeb0P9NmfFLHGd3r_o6rAyHYoY4CQSHsolwCjV-scCE580IyE9qALFkupn3AVuKdkJ9Y8_hBC2-rqPxVPdXD9kuqh3vvM9fgSA3DZzMuBfXhucS6L1EVb9BYP09KW8UYYnqU-PJUmRPIl5HsuOpB8MnozfFuofARlBFPtBTzK2aMfOwkfr4fkOzX36Vi_BpazG_36KDsjbmES5FOd92iqZEoQyXjldhyojEKkq7NDEibdBT22bjrMNtjX3Y\";\r\nconst CLIENT_ID = \"test-37d09f16-d5f5-4229-8b18-0e9616d37bc7\";\r\n\r\nasync function retrieveTokenUsingClientAssertion(\r\n    clientId,\r\n    clientAssertion,\r\n    scopes\r\n) {\r\n    const body = {\r\n        grant_type: \"client_credentials\",\r\n        client_id: clientId,\r\n        scope: scopes,\r\n        audience: \"https://secure.stitch.money/connect/token\",\r\n        client_assertion_type:\r\n            \"urn:ietf:params:oauth:client-assertion-type:jwt-bearer\",\r\n        client_assertion: clientAssertion\r\n    };\r\n    const bodyString = Object.entries(body)\r\n        .map(([k, v]) => `${k}=${encodeURIComponent(v)}`)\r\n        .join(\"&\");\r\n    const response = await fetch(\"https://secure.stitch.money/connect/token\", {\r\n        method: \"post\",\r\n        headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\r\n        body: bodyString\r\n    });\r\n    const responseBody = await response.json();\r\n    console.log(\"Tokens: \", responseBody);\r\n    return responseBody.access_token;\r\n}\r\n\r\n//Whenever you need a new token, uncomment section below, it will generate a new token, then check console on the browser to get the token\r\n\r\n\r\nconst token = retrieveTokenUsingClientAssertion(\r\n    CLIENT_ID,\r\n    CLIENT_ASSERTION,\r\n    \"client_paymentrequest\"\r\n);\r\n*/\r\n\r\n//Replace with newly generated token\r\n//const token = \"kU2NhCiPQ--TB_0A9tDqweZg-Wf6APjspvtVLjUaN1g\";\r\n\r\n\r\nconst paybutton = document.getElementById('pay-button');\r\npaybutton.addEventListener(\"click\", function () {\r\n    console.log(token);\r\n    const token = \"0fanmeJjUSO1Ub06sTJb0to4mU-pVT1HlsQ0lGsIwoA\";\r\n    const graphQLClient = new GraphQLClient(\"https://api.stitch.money/graphql\", {\r\n        headers: { authorization: `Bearer ${token}` }\r\n    });\r\n    const createPaymentRequestMutation = `\r\n    mutation CreatePaymentRequest(\r\n        $amount: MoneyInput!,\r\n        $payerReference: String!,\r\n        $beneficiaryReference: String!,\r\n        $externalReference: String,\r\n        $beneficiaryName: String!,\r\n        $beneficiaryBankId: BankBeneficiaryBankId!,\r\n        $beneficiaryAccountNumber: String!) {\r\n      clientPaymentInitiationRequestCreate(input: {\r\n          amount: $amount,\r\n          payerReference: $payerReference,\r\n          beneficiaryReference: $beneficiaryReference,\r\n          externalReference: $externalReference,\r\n          beneficiary: {\r\n              bankAccount: {\r\n                  name: $beneficiaryName,\r\n                  bankId: $beneficiaryBankId,\r\n                  accountNumber: $beneficiaryAccountNumber\r\n              }\r\n          }\r\n        }) {\r\n        paymentInitiationRequest {\r\n          id\r\n          url\r\n        }\r\n      }\r\n    }`;\r\n\r\n    let urlResponse = ''\r\n    \r\n        graphQLClient\r\n            .request(createPaymentRequestMutation, {\r\n                amount: {\r\n                    quantity: 1,\r\n                    currency: \"ZAR\"\r\n                },\r\n                payerReference: \"Joe-Fizz-01\",\r\n                beneficiaryReference: \"KombuchaFizz\",\r\n                externalReference: \"example-e32e5478-325b-4869-a53e-2021727d2afe\",\r\n                beneficiaryName: \"FizzBuzz Co.\",\r\n                beneficiaryBankId: \"fnb\",\r\n                beneficiaryAccountNumber: \"123456789\"\r\n            })\r\n            .then((data) => {\r\n                console.log(\"THE DATA: \",\r\n                    data.clientPaymentInitiationRequestCreate.paymentInitiationRequest\r\n                );\r\n                \r\n\r\n\r\n    urlResponse = data.clientPaymentInitiationRequestCreate.paymentInitiationRequest;\r\n    console.log(urlResponse)\r\n    const url = `${urlResponse.url}?redirect_uri=http%3A%2F%2Flocalhost%3A3000`;\r\n    window.location.href = url;\r\n\r\n\r\n\r\n});\r\n\r\n});\r\n\r\n"},"lineCount":null}},"error":null,"hash":"88102124ca18a39f71ea08cac5432d5d","cacheData":{"env":{}}}